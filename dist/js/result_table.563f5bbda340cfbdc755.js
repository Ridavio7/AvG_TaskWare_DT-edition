(()=>{var t={747:()=>{document.querySelectorAll(".button__tab__first").forEach((function(t){t.addEventListener("click",(function(){for(var e=document.getElementsByClassName(t.classList[0]),n=document.getElementsByClassName(t.classList[1]),a=0;a<e.length;a++)e[a].className=e[a].className.replace(" button__tab__first_active","");for(var s=0;s<n.length;s++)n[s].className+=" button__tab__first_active";localStorage.setItem("buisness_tabcontent_tab_active",t.classList[1])}))}))},112:()=>{function t(t){localStorage.setItem("theme",t),document.documentElement.className=t}var e=document.getElementsByClassName("header__user__switch-input");e[0].addEventListener("click",(function(e){"theme-dark"===localStorage.getItem("theme")?t("theme-light"):t("theme-dark")})),"theme-dark"===localStorage.getItem("theme")?(t("theme-dark"),e[0].checked=!1):(t("theme-light"),e[0].checked=!0),document.getElementsByClassName("header__user__arrow")[0].addEventListener("click",(function(t){t.target.parentElement.parentElement.classList.toggle("header__user__container_menu-visibale")})),document.getElementsByClassName("header__user__link_leave-site")[0].addEventListener("click",(function(t){!0===confirm("Вы уверены, что хотите выйти?")&&(window.location="https://dev.proektit.ru")}))}},e={};function n(a){var s=e[a];if(void 0!==s)return s.exports;var r=e[a]={exports:{}};return t[a](r,r.exports,n),r.exports}(()=>{"use strict";n(112),n(747);var t=function(t,e){var n,a=new XMLHttpRequest,s=JSON.stringify(t);a.responseType="text",a.onload=function(){if(4===a.readyState)if(200===a.status)try{n=JSON.parse(a.responseText),e(1,n)}catch(t){console.log(t)}else e(0,null)},a.onerror=function(){console.log("Ошибка соединения!"),e(0,null)},a.open("POST","https://apitw.avantguard.pro:32100/json"),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.send(s)},e=function(t,e){for(var n=e.getElementsByTagName("input"),a=[],s=0,r=n.length;s<r;s++)n[s].name===t&&a.push(n[s]);var c=a[0].value;return""===c&&(c=" "),c},a=function(t,e){var n=JSON.parse(localStorage.getItem(e));for(var a in n)if(0===n[a].del){var s=new Option(n[a].name,n[a].uin);t.append(s)}},s=function(t,e,n,s,r,c,l){var o=document.createElement("select");o.id="".concat(t,"_").concat(e),o.className=c;var i=document.createElement("option");i.text=n,i.value=s,o.appendChild(i),l.appendChild(o),a(o,r)};function r(n,a){if(0!==n)if(console.log(a),1===a.succ)alert("Все успешно, прошла отгрузка"),function(n,a){if(0===n)return;console.log(a.answS);var s="wrapper_tb_shipment_sets",r=document.getElementById(s);for(var o in a.answS){var i=document.createElement("table");i.className="table";var d=i.insertRow(-1);d.className="table",d.innerHTML='<td class="td table__content_head"><img src="assets/images/arrow_sidebar_2.svg"></td></td><td class="td">SN отгрузки</td><td class="td">№ в партии</td><td class="td">Комплект</td><td class="td">Статус</td><td class="td">Получатель</td><td class="td">Дата</td><td class="td">Примечание</td><td></td>',r.append(i);var u=a.answS[o],p=u.NPset,_=u.SNset,m=u.set,v=u.status.name,g=u.status.uin,h=u.kontr,f=u.date,N=u.prim,b=u.uin,y=u.comp;c(p,_,m,v,g,h,f,N,b,i,s);var C=document.createElement("table");C.className="table table__content_set",C.id="table_content_set_".concat(b);var L=C.insertRow(-1);for(var E in L.className="table",L.innerHTML='<td class="td"></td><td class="td">SN изделия</td><td class="td">Изделие</td><td class="td">Цвет</td>',i.after(C),y){var w=y[E];l(w.prod,w.snprod,w.color.name,w.color.uin,w.uinpr,C)}}r.querySelectorAll(".table__content_head").forEach((function(t){t.addEventListener("click",(function(t){var e=t.currentTarget.parentNode.parentNode.parentNode.nextElementSibling.classList.toggle("active");t.srcElement.style.transform=!0===e?"rotate(-180deg)":"none"}))})),document.querySelectorAll(".button__control_update-ship-sets").forEach((function(n){n.addEventListener("click",(function(){var a=JSON.stringify(function(t){var e=document.getElementById("table_content_set_".concat(t)),n=e.getElementsByTagName("select"),a=[];for(var s in n){var r={},c=n[s];r.uincolor=c.value,r.uinpr=c.id,a.push(r)}return a.splice(0,a.length-3)}(n.value)),s={user:"demo",meth:"update",obj:"shipSets",uinstatus:"",date:"",prim:"",arrpr:"".concat(a),uin:"".concat(n.value)},r=wrapper_tb_shipment_sets;s.uinstatus=function(t,e,n){for(var a=t.getElementsByTagName("select"),s=[],r=0,c=a.length;r<c;r++)a[r].id==="".concat(e,"_").concat(n)&&s.push(a[r]);return s[0].value}(r,"ship_sets_status_select_",n.value),s.date=e("ship_sets_date_".concat(n.value),r),s.prim=e("ship_sets_prim_".concat(n.value),r),t(s,funcProcessOnlyInfo)}))}))}(n,a),function(t,e){if(0===t)return;console.log(e.answP);var n="wrapper_tb_shipment_products",a=document.getElementById(n);for(var s in e.answP){var r=document.createElement("table"),c=r.insertRow(-1);c.className="td_ship",c.innerHTML='<td class="table_head"><img src="../images/arrow_down_sidebar.svg"></td><td>Диапазон SN изделий</td><td>Кол-во в партии</td><td>Изделие</td><td>Получатель</td>',a.append(r);var l=e.answP[s],d=l.SNbeg,u=l.SNend,p=l.NP,_=l.prod,m=l.kontr,v=l.more;o(d,u,p,_,m,r,n);var g=document.createElement("table");g.className="table_content_prod";var h=g.insertRow(-1);for(var f in h.className="td_ship",h.innerHTML="<td></td><td>SN изделия</td><td>Доп. № изделия</td><td>№ в партии</td><td>Изделие</td><td>Цвет</td><td>Версия АПП</td><td>Версия ПО</td><td>МАС-адрес</td><td>Статус</td><td>Получатель</td><td>Дата</td><td>Примечание</td><td></td>",r.after(g),v){var N=v[f];i(N.SNprod,N.nprod,N.NPset,N.prod,N.color.name,N.color.uin,N.vapp.name,N.vapp.uin,N.vapp.name,N.vapp.uin,N.mac,N.status.name,N.status.uin,N.kontr,N.date,N.prim,N.uin,g)}}a.querySelectorAll(".table_head").forEach((function(t){t.addEventListener("click",(function(t){var e=t.currentTarget.parentNode.parentNode.parentNode.nextElementSibling.classList.toggle("active");t.srcElement.style.transform=!0===e?"rotate(-180deg)":"none"}))}))}(n,a);else if(0===a.succ){var s=[];for(var r in a.answF){var d=a.answF[r].name;s.push(d)}alert("Не хватает наклеек у изделия(-й) ".concat(s))}else if(2===a.succ){var u=a.user.toString();alert("Базу занял ".concat(u))}else 3===a.succ?alert("Сервер не смог заблокировать базу для текущей отгрузки, ждем пока освободиться"):4===a.succ&&alert("Вы ничего не отгружаете! Вернитесь и выберете изделия для отгрузки!")}function c(t,e,n,a,r,c,l,o,i,d,u){var p=d.insertRow(-1);p.classList="tr",p.insertCell(0).classList="td";var _=p.insertCell(1);_.classList="td";var m=p.insertCell(2);m.classList="td";var v=p.insertCell(3);v.classList="td";var g=p.insertCell(4);g.classList="td";var h=p.insertCell(5);h.classList="td";var f=p.insertCell(6);f.classList="td";var N=p.insertCell(7);N.classList="td";var b=p.insertCell(8);b.classList="td",s("ship_sets_status_select_",i,a,r,"statuses_list","select",g),f.innerHTML='<input class="input__type-text" type="date" value="'.concat(l,'" name="ship_sets_date_').concat(i,'">'),N.innerHTML='<input class="input__type-text" type="text" value="'.concat(o,'" name="ship_sets_prim_').concat(i,'">'),_.innerHTML=t,m.innerHTML=e,v.innerHTML=n,h.innerHTML=c,b.innerHTML='<button class="button__control button__control_update-ship-sets" style="background-color:inherit" value="'.concat(i,'"><img class="button__control__img" src="assets/images/arrow_3.svg" alt=""></button>'),document.getElementById(u).style.display="block"}function l(t,e,n,s,r,c){var l=c.insertRow(-1),o=(l.insertCell(0),l.insertCell(1)),i=l.insertCell(2),d=l.insertCell(3),u=document.createTextNode(t);i.append(u);var p=document.createTextNode(e);o.append(p);var _=document.createElement("select");_.id=r;var m=document.createElement("option");m.text=n,m.value=s,_.appendChild(m),d.appendChild(_);var v=localStorage.getItem("colors_list");a(_,JSON.parse(v))}function o(t,e,n,a,s,r,c){var l=r.insertRow(-1),o=(l.insertCell(0),l.insertCell(1)),i=l.insertCell(2),d=l.insertCell(3),u=l.insertCell(4),p=document.createTextNode("".concat(t," - ").concat(e));o.append(p);var _=document.createTextNode(n);i.append(_);var m=document.createTextNode(a);d.append(m);var v=document.createTextNode(s);u.append(v),document.getElementById(c).style.display="block"}function i(t,e,n,a,r,c,l,o,i,d,u,p,_,m,v,g,h,f){var N=f.insertRow(-1),b=(N.insertCell(0),N.insertCell(1)),y=N.insertCell(2),C=N.insertCell(3),L=N.insertCell(4),E=N.insertCell(5),w=N.insertCell(6),S=N.insertCell(7),T=N.insertCell(8),x=N.insertCell(9),k=N.insertCell(10),H=N.insertCell(11),M=N.insertCell(12),I=N.insertCell(13);s("ship_product_color_select_",h,r,c,"colors_list","select",E),s("ship_product_vapp_select_",h,l,o,"verapp_list","select",w),s("ship_product_vpp_select_",h,i,d,"verpp_list","select",S),s("ship_product_status_select_",h,p,_,"statuses_list","select",x),T.innerHTML='<input class="input__type-text" type="text" value="'.concat(u,'" name="ship_product_mac_').concat(h,'">'),H.innerHTML='<input class="input__type-text" type="date" value="'.concat(v,'" name="ship_product_date_').concat(h,'">'),M.innerHTML='<input class="input__type-text" type="text" value="'.concat(g,'" name="ship_product_prim_').concat(h,'">'),y.innerHTML='<input class="input__type-text" type="text" value="'.concat(e,'" name="ship_product_nprod_').concat(h,'">');var B=document.createTextNode(t);b.append(B);var R=document.createTextNode(n);C.append(R);var P=document.createTextNode(a);L.append(P);var O=document.createTextNode(m);k.append(O),I.innerHTML='<button class="button_control" style="background-color:inherit" onclick="funcUpdateProductsRowChild('.concat(h,",").concat(c,",").concat(o,",").concat(d,",").concat(_,',this)"><img src="../images/button/chb/checkbox.svg"></button>')}window.onload=function(){var e,n,a,s;e=localStorage.getItem("zapros_set_value"),n=localStorage.getItem("zapros_product_value"),a=localStorage.getItem("contragent_uin"),s={user:"demo",meth:"ship",contr:"".concat(a),zaprS:"".concat(e),zaprP:"".concat(n)},t(s,r)}})()})();