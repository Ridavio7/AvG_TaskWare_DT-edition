(()=>{var e={747:()=>{document.querySelectorAll(".button__tab__first").forEach((function(e){e.addEventListener("click",(function(){for(var t=document.getElementsByClassName(e.classList[0]),n=document.getElementsByClassName(e.classList[1]),o=0;o<t.length;o++)t[o].className=t[o].className.replace(" button__tab__first_active","");for(var s=0;s<n.length;s++)n[s].className+=" button__tab__first_active";localStorage.setItem("buisness_tabcontent_tab_active",e.classList[1])}))}))},112:()=>{function e(e){localStorage.setItem("theme",e),document.documentElement.className=e}var t=document.getElementsByClassName("header__user__switch-input");t[0].addEventListener("click",(function(t){"theme-dark"===localStorage.getItem("theme")?e("theme-light"):e("theme-dark")})),"theme-dark"===localStorage.getItem("theme")?(e("theme-dark"),t[0].checked=!1):(e("theme-light"),t[0].checked=!0),document.getElementsByClassName("header__user__arrow")[0].addEventListener("click",(function(e){e.target.parentElement.parentElement.classList.toggle("header__user__container_menu-visibale")})),document.getElementsByClassName("header__user__link_leave-site")[0].addEventListener("click",(function(e){!0===confirm("Вы уверены, что хотите выйти?")&&(window.location="https://dev.proektit.ru")}))},916:()=>{document.querySelector(".sidebar__expand-button").addEventListener("click",(function(){document.body.classList.toggle("collapsed")})),document.querySelectorAll(".sidebar__link").forEach((function(e){e.addEventListener("click",(function(){var t,n,o;for(n=document.getElementsByClassName("sidebar__tabcontent"),t=0;t<n.length;t++)n[t].style.display="none";for(o=document.getElementsByClassName("sidebar__link"),t=0;t<o.length;t++)o[t].className=o[t].className.replace(" sidebar__link_active","");document.getElementById(e.classList[1]).style.display="flex",document.getElementById(e.classList[1]).style.flexDirection="column",e.className+=" sidebar__link_active",localStorage.setItem("buisness_sidebar_tab_first_active",e.id),"link_provider"!==e.id&&"link_storage"!==e.id||(localStorage.removeItem("buisness_tab_first_active"),localStorage.removeItem("buisness_tab_second_active"),localStorage.removeItem("buisness_tab_third_active"))}))})),document.querySelectorAll(".sidebar__menu__link").forEach((function(e){e.addEventListener("click",(function(){tablinks=document.getElementsByClassName("sidebar__menu__link");for(var t=0;t<tablinks.length;t++)tablinks[t].className=tablinks[t].className.replace(" sidebar__link_active","");e.className+=" sidebar__link_active",e.parentElement.parentElement.previousElementSibling.click(),localStorage.setItem("buisness_sidebar_tab_second_active",e.id)}))}));for(var e=document.querySelectorAll(".sidebar__arrow"),t=0;t<e.length;t++)e[t].addEventListener("click",(function(e){var t=e.target.parentElement.parentElement;t.classList.toggle("sidebar__wrapper_menu-visibale"),localStorage.setItem("buisness_sidebar_arrow_active",t.id)}))}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,n),a.exports}(()=>{"use strict";n(112),n(916),n(747);var e=function(e,t){var n,o=new XMLHttpRequest,s=JSON.stringify(e);o.responseType="text",o.onload=function(){if(4===o.readyState)if(200===o.status)try{n=JSON.parse(o.responseText),t(1,n)}catch(e){console.log(e)}else t(0,null)},o.onerror=function(){console.log("Ошибка соединения!"),t(0,null)},o.open("POST","https://apitw.avantguard.pro:32100/json"),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.send(s)},t=function(e,t){0!==e&&(console.log(t),0===t.succ&&alert("Произошла ошибка! Попробуйте снова!"))},o=function(e){e.style.background="green",setTimeout((function(){e.style.background="inherit"}),1e3)},s=function(e,t){for(var n=t.getElementsByTagName("input"),o=[],s=0,a=n.length;s<a;s++)n[s].name===e&&o.push(n[s]);var r=o[0].value;return""===r&&(r=" "),r},a=function(e,t){var n=JSON.parse(localStorage.getItem(t));for(var o in n)if(0===n[o].del){var s=new Option(n[o].name,n[o].uin);e.append(s)}},r=function(e,t,n){var o=document.createElement("option");o.text=t,o.value=n,e.appendChild(o)},l=function(e){e.value="";for(var t=e.length,n=0;n<t;n++)e.remove(0)},c=function(e){for(var t=document.getElementById(e);1<t.rows.length;)t.deleteRow(1)},i=function(e){for(var t=document.getElementById(e);0<t.rows.length;)t.deleteRow(0)},u=function(t,n,o,s){document.getElementById(t).addEventListener("change",(function(){switch(c(n),this.selectedIndex){case 0:e({user:"demo",meth:"view",obj:o,count:"500"},s);break;case 1:e({user:"demo",meth:"view",obj:o,count:"500",sort:"name"},s);break;case 2:e({user:"demo",meth:"view",obj:o,count:"500",asort:"name"},s);break;case 3:e({user:"demo",meth:"view",obj:o,count:"500",sort:"uin"},s);break;case 4:e({user:"demo",meth:"view",obj:o,count:"500",asort:"uin"},s);break;case 5:e({user:"demo",meth:"view",obj:o,count:"500",sort:"uinset"},s);break;case 6:e({user:"demo",meth:"view",obj:o,count:"500",asort:"uinset"},s);break;case 7:e({user:"demo",meth:"view",obj:o,count:"500",sort:"datechange"},s);break;case 8:e({user:"demo",meth:"view",obj:o,count:"500",asort:"datechange"},s)}}))},d=document.querySelectorAll(".modal__moving"),m=0;d.forEach((function(e){e.addEventListener("click",(function(e){m+=1,e.target.offsetParent.offsetParent.style.zIndex=m}))}));var _=document.getElementById("user_modal"),v=document.getElementById("user_close"),b=document.getElementById("user_name"),g=document.getElementById("user_job"),f=document.getElementById("user_email"),h=document.getElementById("user_phone"),y=document.getElementById("user_login"),p=document.getElementById("user_pass_first"),E=document.getElementById("user_pass_second"),k=(document.getElementById("tb_user_rights"),document.getElementById("user_save")),L=document.getElementById("user_add");v.onclick=function(){_.style.display="none"},function(e){var t=0,n=0,o=0,s=0;function a(e){(e=e||window.event).preventDefault(),o=e.clientX,s=e.clientY,document.onmouseup=l,document.onmousemove=r}function r(a){(a=a||window.event).preventDefault(),t=o-a.clientX,n=s-a.clientY,o=a.clientX,s=a.clientY,e.style.top=e.offsetTop-n+"px",e.style.left=e.offsetLeft-t+"px"}function l(){document.onmouseup=null,document.onmousemove=null}document.getElementById(e.id+"_moving")?document.getElementById(e.id+"_moving").onmousedown=a:e.onmousedown=a}(_);var w=function(){e({user:"demo",meth:"view",obj:"rights",count:"100"},I)},I=function(e,t){if(0!==e){console.log("Права:",t);var n="tb_user_rights";for(var o in i(n),t.answ){var s=t.answ[o];if(0===s.del){var a=s.name,r=s.uin;j(a,r,n)}}}},j=function(e,t,n){var o=document.getElementById(n).insertRow(-1);o.classList="tr";var s=o.insertCell(0);s.classList="td";var a=o.insertCell(1);a.classList="td",s.innerHTML='<input class="checkbox" type="checkbox" id="right_'.concat(t,'" value="').concat(t,'"><label for="right_').concat(t,'"></label>'),a.innerHTML=e},S=function(t){var n={user:"demo",meth:"view",obj:"users",count:"1",filt:'[{"fld":"uin","val":["'.concat(t,'"]}]')};e(n,B)},B=function(e,t){if(0!==e){console.log("Пользователь:",t),b.value="",f.value="",h.value="",l(g);var n=t.answ[0],o=n.name,s=n.job.name,a=n.job.uin,r=n.email,c=n.phone,i=n.rights,u=n.uin;N(o,s,a,r,c,i,u)}},N=function(e,t,n,o,s,l,c){for(var i in b.value=e,f.value=o,h.value=s,k.value=c,r(g,t,n),a(g,"jobs_list"),l){var u=l[i].uin,d=document.getElementById("right_".concat(u));null===d?alert("Одно из установленных прав пользователя удалено! Снимите пометку удаления права!"):d.checked=!0}};k.addEventListener("click",(function(n){var o={user:"demo",meth:"update",obj:"users",uin:"".concat(n.currentTarget.value),name:"",rights:"",uinjob:"4",email:"",phone:""};o.name=b.value,o.uinjob=g.value,o.email=f.value,o.phone=h.value;var s=_.getElementsByClassName("checkbox"),a=[];for(var r in s)!0===s[r].checked&&a.push(+s[r].value);o.rights="[".concat(a,"]"),e(o,t),setTimeout((function(){T()}),100)})),document.querySelector(".button__control_add-users-main").addEventListener("click",(function(){_.style.display="block",L.style.display="flex",k.style.display="none",b.value="",f.value="",h.value="",y.value="",p.value="",E.value="",l(g),r(g,"---",""),a(g,"jobs_list"),setTimeout((function(){w()}),100)})),L.addEventListener("click",(function(){var n={user:"demo",meth:"add",obj:"users",name:"",rights:"",uinjob:"",email:"",phone:""};""===b.value&&""===g.value?alert("Вы не заполнили все поля!"):(n.name=b.value,n.uinjob=g.value,n.email=f.value,n.phone=h.value,e(n,t),setTimeout((function(){T()}),100),setTimeout((function(){_.style.display="none"}),150))}));var T=function(){e({user:"demo",meth:"view",obj:"users",count:"100"},C)},C=function(n,o){if(0!==n){console.log("Пользователи:",o);var s="tb_users";c(s);var a=o.answ;for(var r in localStorage.setItem("users_list",JSON.stringify(a)),o.answ){var l=o.answ[r],i=+r+1,u=l.name,d=l.job.name,m=l.email,v=l.phone,b=l.del,g=l.uin;x(i,u,d,m,v,b,g,s)}document.querySelectorAll(".button__control_mdel-users-main").forEach((function(n){n.addEventListener("click",(function(){var o={user:"demo",meth:"mdel",obj:"users",uin:"".concat(n.value)};"red"===n.style.background?n.style.background="inherit":n.style.background="red",e(o,t)}))})),document.querySelectorAll(".button__control_modal-users-main").forEach((function(e){e.addEventListener("click",(function(){!function(e){_.style.display="block",k.style.display="flex",L.style.display="none",w(),setTimeout((function(){S(e)}),100)}(e.value)}))}))}},x=function(e,t,n,o,s,a,r,l){var c=document.getElementById(l).insertRow(-1);c.classList="tr";var i=c.insertCell(0);i.classList="td";var u=c.insertCell(1);u.classList="td";var d=c.insertCell(2);d.classList="td";var m=c.insertCell(3);m.classList="td";var _=c.insertCell(4);_.classList="td";var v=c.insertCell(5);v.classList="td";var b,g=c.insertCell(6);g.classList="td",i.innerHTML='<button class="button__control button__control_modal-users-main" value="'.concat(r,'"><img class="button__control__img" src="assets/images/info.svg" alt=""></button>'),u.innerHTML=e,d.innerHTML=t,m.innerHTML=n,_.innerHTML=o,v.innerHTML=s,b=0===a?"inherit":"red",g.classList="td td_buttons-control",g.innerHTML='<button class="button__control button__control_mdel-users-main" style="background:'.concat(b,'" value="').concat(r,'"><img class="button__control__img" src="assets/images/cross.svg"></button>')};u("sort_users","tb_users","users",C);var q=function(){e({user:"demo",meth:"view",obj:"jobs",count:"100"},H)},H=function(n,a){if(0!==n){console.log("Должности:",a);var r="tb_jobs";c(r);var l=a.answ;for(var i in localStorage.setItem("jobs_list",JSON.stringify(l)),a.answ){var u=a.answ[i],d=u.name,m=u.del,_=u.uin;M(d,m,_,r)}document.querySelectorAll(".button__control_mdel-users-jobs").forEach((function(n){n.addEventListener("click",(function(){var o={user:"demo",meth:"mdel",obj:"jobs",uin:"".concat(n.value)};"red"===n.style.background?n.style.background="inherit":n.style.background="red",e(o,t)}))})),document.querySelectorAll(".button__control_update-users-jobs").forEach((function(n){n.addEventListener("click",(function(){var a={user:"demo",meth:"update",obj:"jobs",name:"",uin:"".concat(n.value)},r=document.getElementById("tb_jobs");a.name=s("job_name_".concat(n.value),r),e(a,t),o(n),setTimeout((function(){q()}),100)}))}))}},M=function(e,t,n,o){var s=document.getElementById(o).insertRow(-1);s.classList="tr";var a=s.insertCell(0);a.classList="td";var r,l=s.insertCell(1);l.classList="td",a.innerHTML='<input class="input__type-text" type="text" value="'.concat(e,'" name="job_name_').concat(n,'">'),r=0===t?"inherit":"red",l.classList="td td_buttons-control",l.innerHTML='<button class="button__control button__control_update-users-jobs" value="'.concat(n,'"><img class="button__control__img" src="assets/images/arrow_3.svg" alt=""></button><button class="button__control button__control_mdel-users-jobs" style="background:').concat(r,'" value="').concat(n,'"><img class="button__control__img" src="assets/images/cross.svg"></button>')};document.querySelector(".button__control_add-users-jobs").addEventListener("click",(function(){var n={user:"demo",meth:"add",obj:"jobs",name:""},o=document.getElementById("input_add_jobs").value;""===o?alert("Вы не заполнили все поля!"):(n.name=o,document.getElementById("input_add_jobs").value="",e(n,t),setTimeout((function(){q()}),100))})),u("sort_jobs","tb_jobs","jobs",H);var A=function(){e({user:"demo",meth:"view",obj:"rights",count:"100"},O)},O=function(n,a){if(0!==n){console.log("Права:",a);var r="tb_rights";c(r);var l=a.answ;for(var i in localStorage.setItem("rights_list",JSON.stringify(l)),a.answ){var u=a.answ[i],d=u.name,m=u.del,_=u.uin;R(d,m,_,r)}document.querySelectorAll(".button__control_mdel-users-rights").forEach((function(n){n.addEventListener("click",(function(){var o={user:"demo",meth:"mdel",obj:"rights",uin:"".concat(n.value)};"red"===n.style.background?n.style.background="inherit":n.style.background="red",e(o,t)}))})),document.querySelectorAll(".button__control_update-users-rights").forEach((function(n){n.addEventListener("click",(function(){var a={user:"demo",meth:"update",obj:"rights",name:"",uin:"".concat(n.value)},r=tb_rights;a.name=s("right_name_".concat(n.value),r),e(a,t),o(n),setTimeout((function(){A()}),100)}))}))}},R=function(e,t,n,o){var s=document.getElementById(o).insertRow(-1);s.classList="tr";var a=s.insertCell(0);a.classList="td";var r,l=s.insertCell(1);l.classList="td",a.innerHTML='<input class="input__type-text" type="text" value="'.concat(e,'" name="right_name_').concat(n,'">'),r=0===t?"inherit":"red",l.classList="td td_buttons-control",l.innerHTML='<button class="button__control button__control_update-users-rights" value="'.concat(n,'"><img class="button__control__img" src="assets/images/arrow_3.svg" alt=""></button><button class="button__control button__control_mdel-users-rights" style="background:').concat(r,'" value="').concat(n,'"><img class="button__control__img" src="assets/images/cross.svg"></button>')};document.querySelector(".button__control_add-users-rights").addEventListener("click",(function(){var n={user:"demo",meth:"add",obj:"rights",name:""},o=document.getElementById("input_add_rights").value;""===o?alert("Вы не заполнили все поля!"):(n.name=o,document.getElementById("input_add_rights").value="",e(n,t),setTimeout((function(){A()}),100))})),u("sort_rights","tb_rights","rights",O),window.onload=function(){T(),q(),A(),J()};var J=function(){var e=document.getElementById(localStorage.getItem("buisness_sidebar_tab_first_active"));e.click(),e.className.includes("sidebar__link_no-child")&&(localStorage.removeItem("buisness_sidebar_tab_second_active"),localStorage.removeItem("buisness_tabcontent_tab_active"));var t=document.getElementById(localStorage.getItem("buisness_sidebar_tab_second_active"));if(null!=t){t.parentElement.parentElement.previousElementSibling.click(),t.click(),t.className.includes("sidebar__menu__link_no-child")&&localStorage.removeItem("buisness_tabcontent_tab_active");var n=localStorage.getItem("buisness_sidebar_arrow_active");document.getElementById(n).className+=" sidebar__wrapper_menu-visibale"}document.getElementsByClassName(localStorage.getItem("buisness_tabcontent_tab_active"))[0].click()}})()})();